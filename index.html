<!DOCTYPE html>
<html lang="en">
   <head> 
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>HBO 80s Database</title>
      <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" >
      <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" >
      <link rel="shortcut icon" href="favicon/favicon.ico" >
      <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" >
      <link rel="manifest" href="favicon/site.webmanifest" >

      <link rel="stylesheet" href="stylesheet.css">


   </head>

			
   <body>
	<div class="search-by-date">
	<span class="search-by-date"><a href="Calendar_with_schedule_1980.html" target="_blank">SEARCH BY DATE</a></span>
	</div>


	<div class="search-section">
<picture>
    <source media="(min-width: 480px)" srcset="Main-Logo-Big-vers-4.png 800w" sizes="27vw">
    <img src="theHBO80sdbsmall.png" alt="logo">
</picture>
	<h1>Searchable 1980s Program Guide Database</h1>
	<p></p>
	
<!-- Collapsable Words of Caution -->

<button type="button" class="collapsible">Words of Caution:</button>
<div class="content">
		
	<div class="words-of-caution-container">
	<div class="words-of-caution-section">
	<ul class="words-of-caution-list">
		<li><span class="words-of-caution-abbrev"><b>AS</b></span><span class="words-of-caution-definition">Adult Situations</span></li>

		<li><span class="words-of-caution-abbrev"><b>AL</b></span><span class="words-of-caution-definition">Adult Language</span></li>
	</ul>
	</div>

	<div class="words-of-caution-section">
	<ul class="words-of-caution-list">
		<li><span class="words-of-caution-abbrev"><b>AH</b></span><span class="words-of-caution-definition">Adult Humor</span></li>

		<li><span class="words-of-caution-abbrev"><b>V</b></span><span class="words-of-caution-definition">Violence</span></li>
	</ul>
	</div>

	<div class="words-of-caution-section">
	<ul class="words-of-caution-list">
		<li><span class="words-of-caution-abbrev"><b>MV</b></span><span class="words-of-caution-definition">Mild Violence</span></li>

		<li><span class="words-of-caution-abbrev"><b>GV</b></span><span class="words-of-caution-definition">Graphic Violence</span></li>
	</ul>
	</div>

	<div class="words-of-caution-section">
	<ul class="words-of-caution-list">
		<li><span class="words-of-caution-abbrev"><b>N</b></span><span class="words-of-caution-definition">Nudity</span></li>

		<li><span class="words-of-caution-abbrev"><b>BN</b></span><span class="words-of-caution-definition">Brief Nudity</span></li>
	</ul>
	</div>

	<div class="words-of-caution-section">
	<ul class="words-of-caution-list">
		<li><span class="words-of-caution-abbrev"><b>SC</b></span><span class="words-of-caution-definition">Strong Sexual Content</span></li>
		<li><span class="words-of-caution-abbrev"><b>R</b></span><span class="words-of-caution-definition">Rape</span></li>
	</ul>
	</div> <!-- Collapsable -->
	</div>


	</div>





<p>This is a fan site for entertainment purposes only and is not affiliated with Home Box Office, Inc.</p>

<!--	Search Section -->

<h2>Search:</h2>
 <div class="Table-Header"> 
<input type="text" id="searchInput" placeholder="Enter search term..." spellcheck="false" autocomplete="off">
<button id="searchButton">Search</button>
<p></p>
    <span> Rows per page: </span> <select id="rowsPerPage">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
        <option value="40">40</option>
        <option value="50">50</option>
	<option value="5000">All Rows</option>
    </select>
<p></p>
<div class="results-container">
<div id="searchResults">
<table id="dataTable">
    <thead>
      
	<tr>
		<th class="movies-column">Programs</th>
		<th class="ratings-column">Rating</th>
		<th class="runtime-column">Runtime</th>
		<th class="words-of-caution-column">Words of Caution</th>
		<th class="description-column">Description</th>
		<th class="dates-aired-column">Dates Aired</th>
		<th class="times-aired-column">Times Aired</th>
		</tr>
	</thead>

<tbody>
<!-- Search Data -->
</tbody>
</table>
</div>
</div>
<div id="pagination"></div>
</div>
</div>


<script>
document.addEventListener("DOMContentLoaded", function () {
    // Fetch and load tbody data from external file
    fetch("data.html")
        .then(response => response.text())
        .then(data => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(data, 'text/html');
            const tbody = doc.querySelector('tbody');

	console.log(tbody);

            document.getElementById('dataTable').appendChild(tbody);

            // Once tbody is loaded, initialize search and pagination
            initializeSearch();
        });

    function initializeSearch() {
        const searchInput = document.getElementById("searchInput");
        const searchButton = document.getElementById("searchButton");
        const rowsPerPageDropdown = document.getElementById("rowsPerPage");
        const headers = document.querySelectorAll("#dataTable th");

        let currentPage = 1;
        let rowsPerPage = 10;
        let sortOrder = 1;
        let currentColumnIndex = null;
        let originalOrder = [];

        const table = document.getElementById("dataTable");
        const tbody = table.tBodies[0];

        originalOrder = Array.from(tbody.rows);

        // Collapsible setup (unchanged)
        const coll = document.getElementsByClassName("collapsible");
        for (let i = 0; i < coll.length; i++) {
            coll[i].addEventListener("click", function () {
                this.classList.toggle("active");
                const content = this.nextElementSibling;
                content.style.display = content.style.display === "block" ? "none" : "block";
            });
        }

        // Focus input
        searchInput.focus();

        // Enter key triggers search
        searchInput.addEventListener("keydown", function (event) {
            if (event.key === "Enter") {
                searchTable();
                scrollToResults();
            }
        });

        // Click search button
        searchButton.addEventListener("click", function () {
            searchTable();
            scrollToResults();
        });

        // Change rows per page
        rowsPerPageDropdown.addEventListener("change", function () {
            const searchInputValue = searchInput.value.trim();
            if (searchInputValue) {
                rowsPerPage = parseInt(this.value);
                searchTable();
            }
        });

        // Header click to sort
        headers.forEach((header, index) => {
            header.addEventListener("click", () => {
                updateHeaderClasses(headers, header);
                sortTable(index);
            });
        });

        function searchTable() {
            const filter = searchInput.value.toLowerCase();
            const tr = table.getElementsByTagName("tr");
            const matches = [];

            for (let i = 1; i < tr.length; i++) {
                tr[i].style.display = "none";
                const td = tr[i].getElementsByTagName("td");
                for (let j = 0; j < td.length; j++) {
                    if (td[j]) {
                        const txtValue = td[j].textContent || td[j].innerText;
                        if (txtValue.toLowerCase().includes(filter)) {
                            matches.push(tr[i]);
                            break;
                        }
                    }
                }
            }

            if (matches.length === 0 || !filter) {
                table.style.display = "none";
                return;
            }

            table.style.display = "table";

            if (currentColumnIndex !== null) {
                sortVisibleRows(currentColumnIndex, matches);
            } else {
                restoreOriginalOrder(matches);
            }

            const totalPages = Math.ceil(matches.length / rowsPerPage);
            if (currentPage > totalPages) currentPage = totalPages;

            const start = (currentPage - 1) * rowsPerPage;
            const end = start + rowsPerPage;

            for (let i = start; i < end && i < matches.length; i++) {
                matches[i].style.display = "";
            }

            renderPagination(totalPages);
        }

        function sortTable(columnIndex) {
            currentColumnIndex = columnIndex;
            sortOrder *= -1;
            searchTable();
        }

        function sortVisibleRows(columnIndex, rows) {
            rows.sort((a, b) => {
                const cellA = a.cells[columnIndex].textContent.trim();
                const cellB = b.cells[columnIndex].textContent.trim();
                const valueA = isNaN(cellA) ? cellA.toLowerCase() : parseFloat(cellA);
                const valueB = isNaN(cellB) ? cellB.toLowerCase() : parseFloat(cellB);
                if (valueA < valueB) return -1 * sortOrder;
                if (valueA > valueB) return 1 * sortOrder;
                return 0;
            });
            rows.forEach(row => tbody.appendChild(row));
        }

        function restoreOriginalOrder(rows) {
            const orderedMatches = originalOrder.filter(row => rows.includes(row));
            orderedMatches.forEach(row => tbody.appendChild(row));
        }

        function renderPagination(totalPages) {
            const pagination = document.getElementById("pagination");
            pagination.innerHTML = "";

            for (let i = 1; i <= totalPages; i++) {
                const pageLink = document.createElement("button");
                pageLink.textContent = i;
                pageLink.classList.add("page-link");
                if (i === currentPage) {
                    pageLink.classList.add("active");
                }
                pageLink.addEventListener("click", function () {
                    currentPage = i;
                    searchTable();
                });
                pagination.appendChild(pageLink);
            }
        }

        function updateHeaderClasses(headers, clickedHeader) {
            headers.forEach(header => header.classList.remove("ascending", "descending"));
            if (sortOrder === 1) {
                clickedHeader.classList.add("ascending");
            } else {
                clickedHeader.classList.add("descending");
            }
        }

        function scrollToResults() {
            const resultsContainer = document.getElementById("searchResults") || table;
            if (resultsContainer) {
                resultsContainer.scrollIntoView({ behavior: "smooth", block: "start" });
            }
        }
    }
});
</script>







   </body>
</html>